"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[245],{6161:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Agents/DatabaseAgent","title":"DatabaseAgent","description":"Introduction","source":"@site/docs/Agents/DatabaseAgent.md","sourceDirName":"Agents","slug":"/Agents/DatabaseAgent","permalink":"/Agent-First-Organization/docs/Agents/DatabaseAgent","draft":false,"unlisted":false,"editUrl":"https://github.com/luyunan0404/AgentOrg/tree/main/docs/docs/Agents/DatabaseAgent.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"RAGAgent","permalink":"/Agent-First-Organization/docs/Agents/RAGAgent"},"next":{"title":"SearchAgent","permalink":"/Agent-First-Organization/docs/Agents/SearchAgent"}}');var i=s(4848),d=s(8453);const r={},a="DatabaseAgent",o={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Database Construction",id:"database-construction",level:2},{value:"Database Schema",id:"database-schema",level:3},{value:"Populate the database",id:"populate-the-database",level:3},{value:"Slot Filling",id:"slot-filling",level:2},{value:"Action Verification",id:"action-verification",level:2},{value:"Sample Conversation",id:"sample-conversation",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"databaseagent",children:"DatabaseAgent"})}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"Database Agents can handle customer inquiries and take correct operations. Different from other agents, this agent can be a highly customized one capable of solving different tasks. For each task, there will be a different database to interact with."}),"\n",(0,i.jsx)(n.p,{children:"In this tutorial, we will focus on a specific use case: a show booking system. For such a customer service, it always involves operations like search, book a show, update booking information, and cancel a booking."}),"\n",(0,i.jsx)(n.h2,{id:"database-construction",children:"Database Construction"}),"\n",(0,i.jsx)(n.h3,{id:"database-schema",children:"Database Schema"}),"\n",(0,i.jsxs)(n.p,{children:["For a show booking database, a simple design is to include three tables in the database: ",(0,i.jsx)(n.code,{children:"show"}),", ",(0,i.jsx)(n.code,{children:"user"}),", and ",(0,i.jsx)(n.code,{children:"booking"}),". For the ",(0,i.jsx)(n.code,{children:"show"})," table, it includes information of all available shows; the ",(0,i.jsx)(n.code,{children:"user"})," table contains information of registered users in the booking system; the ",(0,i.jsx)(n.code,{children:"booking"})," table has all booking records. A"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Database Schema: show"}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column Name"}),(0,i.jsx)(n.th,{children:"Data Type"}),(0,i.jsx)(n.th,{children:"Constraints"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{children:"Primary Key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"show_name"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(100)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"genre"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"date"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DATE"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"time"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TIME"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"description"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TEXT"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"location"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(100)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"price"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DECIMAL"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"available_seats"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INTEGER"})}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Database Schema: user"}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column Name"}),(0,i.jsx)(n.th,{children:"Data Type"}),(0,i.jsx)(n.th,{children:"Constraints"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{children:"Primary Key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"first_name"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"last_name"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(60)"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"register_at"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TIMESTAMP"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"last_login"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TIMESTAMP"})}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Database Schema: booking"}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Column Name"}),(0,i.jsx)(n.th,{children:"Data Type"}),(0,i.jsx)(n.th,{children:"Constraints"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsx)(n.td,{children:"Primary Key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"show_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsxs)(n.td,{children:["Foreign Key (",(0,i.jsx)(n.code,{children:"show(id)"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_id"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VARCHAR(40)"})}),(0,i.jsxs)(n.td,{children:["Foreign Key (",(0,i.jsx)(n.code,{children:"user(id)"}),")"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"created_at"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TIMESTAMP"})}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"populate-the-database",children:"Populate the database"}),"\n",(0,i.jsxs)(n.p,{children:["You can construct the database using ",(0,i.jsx)(n.code,{children:"SQLite"})," and populate it with some sample shows and users. For subsequent tests, please create at least one show and one user, and note down the user id."]}),"\n",(0,i.jsx)(n.h2,{id:"slot-filling",children:"Slot Filling"}),"\n",(0,i.jsx)(n.p,{children:"After each round of conversation, slots are extracted and matched against their original values in the database. For instance, if the user says, \u201cI would like to watch Carmen on Tuesday,\u201d the extracted slots for the show name and time will be mapped to \u201cCarmen\u201d and \u201c2024-11-15,\u201d respectively. Those verified slots will be used in future tasks such as searching, booking, and etc."}),"\n",(0,i.jsx)(n.h2,{id:"action-verification",children:"Action Verification"}),"\n",(0,i.jsxs)(n.p,{children:["As defined in ",(0,i.jsx)(n.a,{href:"/Agent-First-Organization/docs/Taskgraph/Generation",children:"TaskGraph"}),", there is an attribute ",(0,i.jsx)(n.code,{children:"task"})," for each node, which will be used to determine the corresponding database action. In the sample database agent, we define several actions:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"SearchShow: Search for shows"}),"\n",(0,i.jsx)(n.li,{children:"BookShow: Book a show"}),"\n",(0,i.jsx)(n.li,{children:"CheckBooking: Check details of booked show(s)"}),"\n",(0,i.jsx)(n.li,{children:"CancelBooking: Cancel a booking"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"sample-conversation",children:"Sample Conversation"}),"\n",(0,i.jsx)(n.p,{children:"After introducing each individual component of the Database Agent, we will try searching and booking functions for a sample conversation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="dbagent_function_sample.json"',children:'Bot: Hello! How can I help you today?\nYou: Do you have recommendation for shows?\nBot: Could you let me know your preferences or any specific details you\'re looking for in an event, like the type of show, location, or date?\nYou: I want to watch the magic flute.\nBot: Based on your interest in "The Magic Flute," here are some available shows for you to consider. They are all taking place at the Lyric Opera of Chicago in Chicago, IL. The performances are scheduled for November 15th, 20th, and 25th, 2024, each starting at 6:30 PM. This whimsical opera by Wolfgang Amadeus Mozart is priced at $130 per ticket. Please let me know if any of these options appeal to you.\nYou: I want to watch it on Nov 25.\nBot: Are you interested in exploring more options, or would you like help with booking the show on November 25th?\nYou: Book the show.\nBot: The show has been booked. Thank you for using our service today! We would love to hear your feedback on how we can improve. Do you have any comments or suggestions?\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can checkout the ",(0,i.jsx)(n.a,{href:"https://smith.langchain.com/public/f061143d-b4f8-42d6-9bf6-fa678d956d4e/r",children:"LangSmith Trace"})," when searching available shows based on the user's query. The TaskGraph first calls the Database Agent to verify that the user would like to use the search function, then search for relevant shows based on extracted slots, and finally return searched results."]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const i={},d=t.createContext(i);function r(e){const n=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);